# I. SSH là gì?
## 1. Khái niệm
  - SSH (Secure Shell) là một giao thức hỗ trợ các nhà quản trị mạng truy cập vào máy chủ từ xa thông qua mạng internet không bảo mật.
  - SSH tạo ra cơ chế xác thực qua mật khẩu mạnh, hình thành mối liên kết giao tiếp dữ liệu mã hóa ra giữa hai máy qua môi trường internet.

## 2. Cơ chế hoạt động
  - SSH ứng dụng mô hình client-server, kết nối với vùng hiển thị Session và vùng Session chạy.

<p align="center">
  <img width="460" height="300" src="https://github.com/hynhdih/Training_OM/assets/82271913/2afe8ea6-4aeb-4c2b-b36b-268d49105197">
</p>

  - Mục đích SSH được tạo ra để thay thế cho trình giả lập Terminal, cơ chế đăng nhập không an toàn (Telnet, Rlogin). Giao thức SSH hỗ trợ tính năng đăng nhập, khởi chạy Terminal Session thông qua hệ thống điều khiển từ xa.
  - Chức năng:
    - Chức năng cơ bản nhất của giao thức SSH là liên kết với một host từ xa, ứng với một phiên Terminal bằng dòng lệnh "ssh server.example". Dòng lệnh này có thể liên kết Client với một máy chủ server.example thông qua ID người dùng UserName.

## 3. Kỹ thuật mã hoá trong SSH 
  - Ưu điểm lớn nhất của SSH nằm ở khả năng mã hóa, truyền tải dữ liệu an toàn giữa thành phần Host và Client. Trong đó, Host chính là máy chủ từ xa cần liên kết với máy tính Client.

### 3.1. Mã hóa Symmetric Encryption (mã hóa đối xứng)
  - Symmetric Encryption chính là một phương thức mã hóa ứng dụng Secret Key theo hai chiều, giải mã tin cho Host và Client. Như vậy, bất kỳ ai sở hữu mã khóa đều có khả năng giải mã tin nhắn trong quá trình truyền tin.

<p align="center">
  <img src="![image](https://github.com/hynhdih/Training_OM/assets/82271913/3c0c64be-82c1-493d-9a1d-301917ee59ec)">
</p>

  - Symmetrical encryption thường được gọi là shared key hoặc shared secret encryption. Vì có một khóa được sử dụng, hoặc một cặp khóa (pair key) mà một khóa có thể được tính ra từ khóa kia.
  - Symmetric keys được sử dụng để mã hóa toàn bộ liên lạc trong phiên giao dịch SSH. Cả client và server tạo chung một key bí mật như là một phương thức thỏa thuận, và key đó không được tiết lộ cho bên thứ ba. Quá trình tạo symmetric key được thực hiện bởi key exchange algorithm.
  - Thuật toán an toàn là vì **key không được truyền giữa client và host**. Thay vào đó, cả 2 máy tính chia sẽ thông tin chung và sau đó sử dụng chúng để tính ra khóa bí mật. Kể cả có máy khác bắt được thông tin chung, nó cũng không thể tính ra key bí mật vì không biết được thuật toán tạo key.

  - Một số loại symmetrical encryption ciphers
    - AES (Advanced Encryption Standard), DES (Data Encryption Standard), CAST128, Blowfish, ...
    - Trước khi thiết lập kết nối an toàn client và host sẽ đồng ý loại cipher nào được sử dụng, bằng cách xuất bản danh sách cyphers được hỗ trợ để tham khảo.
    - Cypher thích hợp nhất ở phía client sẽ hiển thị trong danh sách của host như là một bidirectional cypher.
    - Ví dụ, nếu 2 máy Ubuntu 14.04 LTS liên lạc với nhau qua SSH, nó sẽ sử dụng  aes128-ctr làm cipher mặc định.

```
Giả sử bạn muốn gửi một file báo cáo quan trọng qua email tới đồng nghiệp. Bạn không muốn ai khác ngoài đồng nghiệp của bạn có thể đọc được file này.
Bước 1: Mã hóa file
Bạn sử dụng một chương trình mã hóa có tích hợp thuật toán AES, một thuật toán mã hóa đối xứng tiêu chuẩn.
Bạn chọn một mật khẩu, mà ở đây chúng ta sẽ giả định là "baomat123". Mật khẩu này sẽ hoạt động như khóa mã hóa.
Chương trình mã hóa sử dụng mật khẩu của bạn để sinh ra một khóa mã hóa, sau đó nó sẽ mã hóa file của bạn, chuyển nó từ dạng có thể đọc được thành dạng "ciphertext" - dạng không thể đọc được mà không có khóa giải mã.
Bước 2: Gửi file mã hóa
Bạn gửi file đã được mã hóa qua email tới đồng nghiệp của bạn.
Bước 3: Giải mã file
Đồng nghiệp của bạn nhận được file. Để đọc nội dung file, họ sẽ cần nhập mật khẩu "baomat123" vào cùng chương trình mã hóa mà bạn đã sử dụng.
Chương trình mã hóa sẽ dùng mật khẩu này để sinh ra lại khóa giải mã và tự động giải mã file, chuyển "ciphertext" trở lại thành dạng ban đầu có thể đọc được.
Bước 4: Thông tin được bảo mật
Trong trường hợp có người khác lấy được file mã hóa, họ không thể giải mã nó mà không biết mật khẩu "baomat123". Do đó, thông tin trong file của bạn vẫn được bảo mật.
Đây là một ví dụ đơn giản nhưng hiệu quả của việc sử dụng mã hóa đối xứng để bảo vệ thông tin. Điểm chú ý quan trọng nhất là việc phân phát khóa mã hóa (trong trường hợp này là mật khẩu) phải được thực hiện thông qua một kênh an toàn khác - có thể là thông qua một cuộc gọi điện thoại, tin nhắn SMS, hoặc ứng dụng nhắn tin được mã hóa đầu cuối.
```

### 3.2. Mã hóa Asymmetric Encryption (mã hóa bất đối xứng)
  - Không giống với symmetrical encryption, **asymmetrical encryption** sử dụng 2 khóa khác nhau để mã hóa và giải mã. 2 khóa này được gọi là public key và private key. Cả 2 hình thành nên một cặp khóa là public-private key pair. Các khóa này liên quan matematically với nhau nhưng không thể tính toán ra một cách dễ dàng từ đối khóa kia.
  - Cách hoạt động của mã hóa Asymmetric:
    - Khóa Công Khai (Public Key): Được sử dụng để mã hóa thông tin. Nó được phát hành rộng rãi và có thể được chia sẻ mà không cần bảo mật.
    - Khóa Riêng (Private Key): Được sử dụng để giải mã thông tin đã được mã hóa bằng khóa công khai. Khóa này phải được giữ kín và không được tiết lộ cho bất cứ ai.
    - Mã hoá: Người gửi sử dụng khóa công khai của người nhận để mã hóa dữ liệu trước khi gửi nó. Điều này đảm bảo rằng bất kỳ ai cũng có thể mã hóa dữ liệu, nhưng chỉ người nhận, duy nhất có khóa riêng tư tương ứng, mới có thể giải mã nó.
    - Giải mã: Người nhận sử dụng khóa riêng tư của mình để giải mã dữ liệu đã được mã hóa bằng khóa công khai. Vì chỉ có khóa riêng tư mới có thể giải mã dữ liệu, nên dữ liệu vẫn được bảo vệ.
  - Ví dụ:
    - Khi một người dùng A muốn gửi thông tin mật cho người dùng B, A sẽ sử dụng khóa công khai của B để mã hóa thông tin đó.
    - Sau khi được mã hóa, thông tin không thể đọc được nếu không có khóa riêng của B.
    - Khi B nhận được thông tin được mã hóa, B sẽ sử dụng khóa riêng tư của mình để giải mã và đọc thông tin. Chỉ B mới có khả năng giải mã thông tin này, do đó đảm bảo tính bảo mật của thông tin được truyền đạt.
